<!DOCTYPE HTML>
<html lang="en-US" manifest="../manifest.appcache">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Filter et Filters | Je découvre Angular</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="e-books">
        <meta name="description" content="![Alt &quot;angularjs.png&quot;](angularjs.png)">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="../chap-02/03-include.html" />
        
        
        <link rel="prev" href="../chap-02/01-ihm.html" />
        

        <meta property="og:title" content="Filter et Filters | Je découvre Angular">
        <meta property="og:site_name" content="Je découvre Angular">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/e-books">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    </head>
    <body>
        

        <link rel="stylesheet" href="../gitbook/style.css">
        


        
    <div class="book" data-github="e-books/je.decouvre.angular" data-level="3.2" data-basepath=".." data-revision="1401338769479">
    <div class="book-header">
    <!-- Actions Left -->
    
    <a href="https://github.com/e-books/je.decouvre.angular" target="_blank" class="btn pull-left"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
	<div class="dropdown-caret">
  <span class="caret-outer"></span>
  <span class="caret-inner"></span>
</div>

	<div class="btn-group btn-block">
		<button id="reduce-font-size" class="btn btn-default">A</button>
		<button id="enlarge-font-size" class="btn btn-default">A</button>
	</div>

	<ul class="list-group font-family-list">
		<li class="list-group-item" data-font="0">Serif</li>
		<li class="list-group-item" data-font="1">Sans</li>
	</ul>

	<div class="btn-group btn-group-xs btn-block color-theme-list">
	  <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
	</div>
</div>

    </span>

    <!-- Actions Right -->
    
    <a href="#" target="_blank" class="btn pull-right" data-sharing="google-plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right" data-sharing="facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right" data-sharing="twitter"><i class="fa fa-twitter"></i></a>
    

    
    <a href="https://github.com/e-books/je.decouvre.angular/stargazers" target="_blank" class="btn pull-right count-star hidden-xs"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/e-books/je.decouvre.angular/watchers" target="_blank" class="btn pull-right count-watch hidden-xs"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="../" >Je découvre Angular</a>
    </h1>
</div>

    <div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        <li>
            <a href="https://github.com/e-books" target="blank">About the author</a>
        </li>
        

        
        <li>
            <a href="https://github.com/e-books/je.decouvre.angular/issues" target="blank">Questions and Issues</a>
        </li>
        

        
        <li>
            <a href="https://github.com/e-books/je.decouvre.angular/edit/master/chap-02/02-filters.md" target="blank">Edit and Contribute</a>
        </li>
        

        
        <li class="divider"></li>
        

        <li data-level="0" data-path="index.html">
            <a href="../"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li  data-level="1" data-path="chap-00/README.html">
                
                <a href="../chap-00/README.html">
                    <i class="fa fa-check"></i> <b>1.</b> 1ers pas
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="1.1" data-path="chap-00/01-preparation.html">
                            
                            <a href="../chap-00/01-preparation.html">
                                <i class="fa fa-check"></i> <b>1.1.</b> Préparation
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.2" data-path="chap-00/02-architecture-minimale.html">
                            
                            <a href="../chap-00/02-architecture-minimale.html">
                                <i class="fa fa-check"></i> <b>1.2.</b> Architecture minimale
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.3" data-path="chap-00/03-ajouter-un-formulaire.html">
                            
                            <a href="../chap-00/03-ajouter-un-formulaire.html">
                                <i class="fa fa-check"></i> <b>1.3.</b> Formulaire
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.4" data-path="chap-00/04-utiliser-une-factory.html">
                            
                            <a href="../chap-00/04-utiliser-une-factory.html">
                                <i class="fa fa-check"></i> <b>1.4.</b> Factory
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="2" data-path="chap-01/README.html">
                
                <a href="../chap-01/README.html">
                    <i class="fa fa-check"></i> <b>2.</b> Jouer avec le serveur
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="2.1" data-path="chap-01/01-services-api-http.html">
                            
                            <a href="../chap-01/01-services-api-http.html">
                                <i class="fa fa-check"></i> <b>2.1.</b> Services et API $http
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.2" data-path="chap-01/02-service-resource.html">
                            
                            <a href="../chap-01/02-service-resource.html">
                                <i class="fa fa-check"></i> <b>2.2.</b> Service $resource
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.3" data-path="chap-01/03-refactoring.html">
                            
                            <a href="../chap-01/03-refactoring.html">
                                <i class="fa fa-check"></i> <b>2.3.</b> Pourquoi faire compliqué
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="3" data-path="chap-02/README.html">
                
                <a href="../chap-02/README.html">
                    <i class="fa fa-check"></i> <b>3.</b> Améliorer l&#39;IHM
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="3.1" data-path="chap-02/01-ihm.html">
                            
                            <a href="../chap-02/01-ihm.html">
                                <i class="fa fa-check"></i> <b>3.1.</b> Un peu d&#39;ihm et de formulaire
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.2" data-path="chap-02/02-filters.html">
                            
                            <a href="../chap-02/02-filters.html">
                                <i class="fa fa-check"></i> <b>3.2.</b> Filter et Filters
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.3" data-path="chap-02/03-include.html">
                            
                            <a href="../chap-02/03-include.html">
                                <i class="fa fa-check"></i> <b>3.3.</b> Inclusion d&#39;html
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.4" data-path="chap-02/04-router.html">
                            
                            <a href="../chap-02/04-router.html">
                                <i class="fa fa-check"></i> <b>3.4.</b> Utilisation d&#39;un routeur
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="4" data-path="chap-03/README.html">
                
                <a href="../chap-03/README.html">
                    <i class="fa fa-check"></i> <b>4.</b> Organiser le projet
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="4.1" data-path="chap-03/01-modules.html">
                            
                            <a href="../chap-03/01-modules.html">
                                <i class="fa fa-check"></i> <b>4.1.</b> Utiliser le pattern module
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="5" data-path="chap-outils/README.html">
                
                <a href="../chap-outils/README.html">
                    <i class="fa fa-check"></i> <b>5.</b> Les outils et frameworks autour d&#39;Angular
                </a>
                
                
            </li>
        

        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 70.58823529411765%;min-width: 64.70588235294117%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../chap-00/README.html" title="1ers pas" class="chapter done new-chapter" data-progress="1" style="left: 5.882352941176471%;"></a>
    
        <a href="../chap-00/01-preparation.html" title="Préparation" class="chapter done " data-progress="1.1" style="left: 11.764705882352942%;"></a>
    
        <a href="../chap-00/02-architecture-minimale.html" title="Architecture minimale" class="chapter done " data-progress="1.2" style="left: 17.647058823529413%;"></a>
    
        <a href="../chap-00/03-ajouter-un-formulaire.html" title="Formulaire" class="chapter done " data-progress="1.3" style="left: 23.529411764705884%;"></a>
    
        <a href="../chap-00/04-utiliser-une-factory.html" title="Factory" class="chapter done " data-progress="1.4" style="left: 29.41176470588235%;"></a>
    
        <a href="../chap-01/README.html" title="Jouer avec le serveur" class="chapter done new-chapter" data-progress="2" style="left: 35.294117647058826%;"></a>
    
        <a href="../chap-01/01-services-api-http.html" title="Services et API $http" class="chapter done " data-progress="2.1" style="left: 41.1764705882353%;"></a>
    
        <a href="../chap-01/02-service-resource.html" title="Service $resource" class="chapter done " data-progress="2.2" style="left: 47.05882352941177%;"></a>
    
        <a href="../chap-01/03-refactoring.html" title="Pourquoi faire compliqué" class="chapter done " data-progress="2.3" style="left: 52.94117647058823%;"></a>
    
        <a href="../chap-02/README.html" title="Améliorer l&#39;IHM" class="chapter done new-chapter" data-progress="3" style="left: 58.8235294117647%;"></a>
    
        <a href="../chap-02/01-ihm.html" title="Un peu d&#39;ihm et de formulaire" class="chapter done " data-progress="3.1" style="left: 64.70588235294117%;"></a>
    
        <a href="../chap-02/02-filters.html" title="Filter et Filters" class="chapter done " data-progress="3.2" style="left: 70.58823529411765%;"></a>
    
        <a href="../chap-02/03-include.html" title="Inclusion d&#39;html" class="chapter  " data-progress="3.3" style="left: 76.47058823529412%;"></a>
    
        <a href="../chap-02/04-router.html" title="Utilisation d&#39;un routeur" class="chapter  " data-progress="3.4" style="left: 82.3529411764706%;"></a>
    
        <a href="../chap-03/README.html" title="Organiser le projet" class="chapter  new-chapter" data-progress="4" style="left: 88.23529411764706%;"></a>
    
        <a href="../chap-03/01-modules.html" title="Utiliser le pattern module" class="chapter  " data-progress="4.1" style="left: 94.11764705882354%;"></a>
    
        <a href="../chap-outils/README.html" title="Les outils et frameworks autour d&#39;Angular" class="chapter  new-chapter" data-progress="5" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_13">
                    
                        <h1 id="filter-et-filters">Filter et Filters</h1>
<p>Les filtres dans Angular, le petit truc sympa qui simplifie grandement la vie (je commence à comprendre de plus en plus pourquoi les développeurs java aiment Angular: tous des faignasses, moi aussi, donc j&#39;aime Angular). </p>
<h2 id="filter-dans-les-templates-on-filtre-ng-repeat-">Filter ... dans les templates : on filtre <code>ng-repeat</code></h2>
<p>Imaginons que je veuille ajouter au-dessus de ma liste de livre une zone de texte qui me permette de filtrer ma liste en fonction du texte saisi, et ceci de manière dynamique... et sans écrire une ligne de javascript :)</p>
<p>Actuellement notre liste ressemble à ceci:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"uk-panel"</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">h3</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"uk-panel-title"</span>&gt;</span>Liste des Livres<span class="hljs-tag">&lt;/<span class="hljs-title">h3</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">table</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"uk-table uk-table-hover"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">thead</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">tr</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>Titre<span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>Description<span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>Niveau<span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>id<span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">thead</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">tbody</span> <span class="hljs-attribute">ng-repeat</span>=<span class="hljs-value">"book in books"</span> <span class="hljs-attribute">ng-click</span>=<span class="hljs-value">"selectBook(book)"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">tr</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span>{{book.title}}<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span>{{book.description}}<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span>{{book.level}}<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span>{{book._id}}<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">tbody</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">table</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
<h3 id="filter-them-all">Filter them all</h3>
<p>Nous allons modifier le code de la façon suivante:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"uk-panel"</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">h3</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"uk-panel-title"</span>&gt;</span>Liste des Livres<span class="hljs-tag">&lt;/<span class="hljs-title">h3</span>&gt;</span>
</code></pre>
<p><strong>On ajoute la zone de texte de recherche</strong> et on lui affecte un modèle <code>searchText</code> (pas besoin de le déclarer dans le code, la directive suffit):</p>
<pre><code class="lang-html">  <span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"uk-form"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">ng-model</span>=<span class="hljs-value">"searchText"</span> <span class="hljs-attribute">placeholder</span>=<span class="hljs-value">"chercher un livre"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">form</span>&gt;</span>
</code></pre>
<p>Ensuite on ne change rien ...</p>
<pre><code class="lang-html">  <span class="hljs-tag">&lt;<span class="hljs-title">table</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"uk-table uk-table-hover"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">thead</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">tr</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>Titre<span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>Description<span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>Niveau<span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>id<span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">thead</span>&gt;</span>
</code></pre>
<p>... <strong>sauf au niveau de la directive</strong> <code>ng-repeat</code> à laquelle on ajoute un filtre sur la valeur de <code>searchText</code>:</p>
<pre><code class="lang-html">    <span class="hljs-tag">&lt;<span class="hljs-title">tbody</span> <span class="hljs-attribute">ng-repeat</span>=<span class="hljs-value">"book in books | filter:searchText"</span> <span class="hljs-attribute">ng-click</span>=<span class="hljs-value">"selectBook(book)"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">tr</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span>{{book.title}}<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span>{{book.description}}<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span>{{book.level}}<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span>{{book._id}}<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">tbody</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">table</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
<p>Nous avons donc ajouté 3 lignes, et modifié une 4ème. Faites l&#39;exercice d&#39;aller demander à un développeur &quot;pas Angular&quot;, à combien de temps il chiffrerait cette fonctionnalité ;). <em>(mais ça c&#39;est un autre sujet ...)</em></p>
<p>Vous n&#39;avez plus qu&#39;à tester, ça fonctionne très bien mais par contre cela fait de la recherche sur l&#39;ensemble des colonnes. Je voudrais pouvoir faire des recherches par champs.</p>
<h3 id="filter-better">Filter ... Better</h3>
<p>Avant tout, allez modifier notre factory <code>Models</code>, on ajoute un niveau <code>&quot;&quot;</code> qui permettra de faire des recherches &quot;tous niveaux&quot; (ou autrement dit sans filtre sur le niveau): </p>
<pre><code class="lang-javascript">booksApp.factory(<span class="hljs-string">"Models"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
  <span class="hljs-keyword">var</span> levels = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> [
      <span class="hljs-string">""</span>, <span class="hljs-string">"très bon"</span>, <span class="hljs-string">"bon"</span>, <span class="hljs-string">"débutant"</span>
    ];
  }

  <span class="hljs-keyword">return</span> {
    levels : levels
  }
});
</code></pre>
<p><strong>Modifions le formulaire de recherche</strong> de la manière suivante:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"uk-form"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">ng-model</span>=<span class="hljs-value">"search.$"</span> <span class="hljs-attribute">placeholder</span>=<span class="hljs-value">"chercher un livre"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">ng-model</span>=<span class="hljs-value">"search.title"</span> <span class="hljs-attribute">placeholder</span>=<span class="hljs-value">"par titre"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">ng-model</span>=<span class="hljs-value">"search.description"</span> <span class="hljs-attribute">placeholder</span>=<span class="hljs-value">"par description"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">select</span> <span class="hljs-attribute">ng-model</span>=<span class="hljs-value">"search.level"</span>
          <span class="hljs-attribute">ng-options</span>=<span class="hljs-value">"level for level in levels"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">select</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">form</span>&gt;</span>
</code></pre>
<p>Donc nous avons ajouté des champs de recherche et modifié les directives <code>ng-model</code> :</p>
<ul>
<li><code>ng-model=&quot;search.$&quot;</code> : on cherche dans tous les champs</li>
<li><code>ng-model=&quot;search.title&quot;</code> : on cherche dans le titre</li>
<li>etc. ...</li>
</ul>
<p><strong>Modifions ensuite la directive</strong> <code>ng-repeat</code> pour prendre en compte les changements:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">tbody</span> <span class="hljs-attribute">ng-repeat</span>=<span class="hljs-value">"book in books | filter:search:strict"</span> <span class="hljs-attribute">ng-click</span>=<span class="hljs-value">"selectBook(book)"</span>&gt;</span>
</code></pre>
<p>Donc, pas beaucoup plus compliqué que toute à l&#39;heure. Vous pouvez tester, et vous aller remarquer que les filtres de recherches sont cumulatifs! Donc une joli fonctionnalité de recherche à pas cher ;).</p>
<p>Vous pouvez aussi utiliser l&#39;API <code>filter</code> en &quot;pur&quot; javascript si vous devez filtrer des tableaux, mais là je vous laisse jeter un coup d&#39;oeil à la documentation d&#39;Angular <a href="https://docs.angularjs.org/api/ng/filter/filter" target="_blank">https://docs.angularjs.org/api/ng/filter/filter</a>.</p>
<h2 id="filters-les-filtres-de-formatage-">Filters : les &quot;filtres de formatage&quot;</h2>
<p>Si vous faites des recherches dans Google sur <code>angular + filter</code>, vous tomberez sur le sujet que nous venons de traiter mais aussi sur la notion de filtre de format d&#39;affichage : on définit la manière dont on veut afficher les données (dates, nombre, monnaie, ...). </p>
<h3 id="afficher-en-majuscules">Afficher en majuscules</h3>
<p>Par exemple, toujours dans ma liste, je souhaite afficher les niveaux en majuscules. Il suffit de modifier :</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span>{{book.level}}<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
</code></pre>
<p>par :</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span>{{book.level | uppercase}}<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
</code></pre>
<p>Là aussi je vous engage à aller voir la documentation : <a href="https://docs.angularjs.org/guide/filter" target="_blank">https://docs.angularjs.org/guide/filter</a></p>
<h3 id="faire-son-propre-filtre-d-affichage-stars-">Faire son propre filtre d&#39;affichage : <code>stars</code></h3>
<p>Je souhaite afficher un certain nombre d&#39;étoiles en fonction du niveau, plutôt que d&#39;afficher le niveau en toutes lettres. Pour cela, il suffit de quelques lignes de javascript pour créer son propre filtre :</p>
<p>Allons éditer <code>public/js/main.js</code> pour ajouter le code suivant:</p>
<pre><code class="lang-javascript">booksApp.filter(<span class="hljs-string">"stars"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span> {</span>
    <span class="hljs-keyword">switch</span> (data) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">"très bon"</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"***"</span>;
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">"bon"</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"**"</span>;
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">"débutant"</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"*"</span>;
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
    }
  }
});
</code></pre>
<p>Nous avons donc notre filtre, et pour l&#39;utiliser il suffit de modifier côté html la ligne de toute à l&#39;heure:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span>{{book.level | uppercase}}<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
</code></pre>
<p>en remplaçant le filtre <code>uppercase</code> par <code>stars</code> :</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span>{{book.level | stars}}<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
</code></pre>
<p>Vous n&#39;avez plus qu&#39;à vérifier. Pratique non?</p>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../chap-02/01-ihm.html" class="navigation navigation-prev "><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../chap-02/03-include.html" class="navigation navigation-next "><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="../gitbook/app.js"></script>
        

    
    <script src="../gitbook/plugins/gitbook-plugin-ga/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mixpanel/plugin.js"></script>
    

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"ga":{"token":"UA-11383603-13"}};
    gitbook.start(config);
});
</script>

    </body>
</html>
